"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getEntryFromCliOrConfig = getEntryFromCliOrConfig;
const getFs_1 = __importDefault(require("../../fs/getFs"));
const init_1 = require("../../main/init");
const parse_config_1 = require("../../config/parse-config");
const fs_path_1 = require("../../file-info/fs-path");
function getEntryFromCliOrConfig(entryFile = '', runInit = true) {
    const fs = (0, getFs_1.default)();
    if (entryFile) {
        return runInit ? (0, init_1.init)((0, fs_path_1.toFsPath)(fs.join(fs.cwd(), entryFile))) : entryFile;
    }
    const potentialConfigFile = fs.join(fs.cwd(), 'sheriff.config.ts');
    if (fs.exists(potentialConfigFile)) {
        const sheriffConfig = (0, parse_config_1.parseConfig)(potentialConfigFile);
        if (sheriffConfig.entryFile) {
            return runInit ? (0, init_1.init)((0, fs_path_1.toFsPath)(fs.join(fs.cwd(), sheriffConfig.entryFile))) : sheriffConfig.entryFile;
        }
        else {
            throw new Error('No entry file found in sheriff.config.ts. Please provide one via the CLI ');
        }
    }
    throw new Error('Please provide an entry file, e.g. main.ts');
}
//# sourceMappingURL=get-entry-from-cli-or-config.js.map