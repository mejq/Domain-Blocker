{
  "version": 3,
  "sources": ["../../rxjs/dist/esm5/internal/observable/dom/fetch.js"],
  "sourcesContent": ["import { __assign, __rest } from \"tslib\";\nimport { createOperatorSubscriber } from '../../operators/OperatorSubscriber';\nimport { Observable } from '../../Observable';\nimport { innerFrom } from '../../observable/innerFrom';\nexport function fromFetch(input, initWithSelector) {\n  if (initWithSelector === void 0) {\n    initWithSelector = {};\n  }\n  var selector = initWithSelector.selector,\n    init = __rest(initWithSelector, [\"selector\"]);\n  return new Observable(function (subscriber) {\n    var controller = new AbortController();\n    var signal = controller.signal;\n    var abortable = true;\n    var outerSignal = init.signal;\n    if (outerSignal) {\n      if (outerSignal.aborted) {\n        controller.abort();\n      } else {\n        var outerSignalHandler_1 = function () {\n          if (!signal.aborted) {\n            controller.abort();\n          }\n        };\n        outerSignal.addEventListener('abort', outerSignalHandler_1);\n        subscriber.add(function () {\n          return outerSignal.removeEventListener('abort', outerSignalHandler_1);\n        });\n      }\n    }\n    var perSubscriberInit = __assign(__assign({}, init), {\n      signal: signal\n    });\n    var handleError = function (err) {\n      abortable = false;\n      subscriber.error(err);\n    };\n    fetch(input, perSubscriberInit).then(function (response) {\n      if (selector) {\n        innerFrom(selector(response)).subscribe(createOperatorSubscriber(subscriber, undefined, function () {\n          abortable = false;\n          subscriber.complete();\n        }, handleError));\n      } else {\n        abortable = false;\n        subscriber.next(response);\n        subscriber.complete();\n      }\n    }).catch(handleError);\n    return function () {\n      if (abortable) {\n        controller.abort();\n      }\n    };\n  });\n}\n"],
  "mappings": ";;;;;;;;;;;;AAAA,SAAS,UAAU,cAAc;AAI1B,SAAS,UAAU,OAAO,kBAAkB;AACjD,MAAI,qBAAqB,QAAQ;AAC/B,uBAAmB,CAAC;AAAA,EACtB;AACA,MAAI,WAAW,iBAAiB,UAC9B,OAAO,OAAO,kBAAkB,CAAC,UAAU,CAAC;AAC9C,SAAO,IAAI,WAAW,SAAU,YAAY;AAC1C,QAAI,aAAa,IAAI,gBAAgB;AACrC,QAAI,SAAS,WAAW;AACxB,QAAI,YAAY;AAChB,QAAI,cAAc,KAAK;AACvB,QAAI,aAAa;AACf,UAAI,YAAY,SAAS;AACvB,mBAAW,MAAM;AAAA,MACnB,OAAO;AACL,YAAI,uBAAuB,WAAY;AACrC,cAAI,CAAC,OAAO,SAAS;AACnB,uBAAW,MAAM;AAAA,UACnB;AAAA,QACF;AACA,oBAAY,iBAAiB,SAAS,oBAAoB;AAC1D,mBAAW,IAAI,WAAY;AACzB,iBAAO,YAAY,oBAAoB,SAAS,oBAAoB;AAAA,QACtE,CAAC;AAAA,MACH;AAAA,IACF;AACA,QAAI,oBAAoB,SAAS,SAAS,CAAC,GAAG,IAAI,GAAG;AAAA,MACnD;AAAA,IACF,CAAC;AACD,QAAI,cAAc,SAAU,KAAK;AAC/B,kBAAY;AACZ,iBAAW,MAAM,GAAG;AAAA,IACtB;AACA,UAAM,OAAO,iBAAiB,EAAE,KAAK,SAAU,UAAU;AACvD,UAAI,UAAU;AACZ,kBAAU,SAAS,QAAQ,CAAC,EAAE,UAAU,yBAAyB,YAAY,QAAW,WAAY;AAClG,sBAAY;AACZ,qBAAW,SAAS;AAAA,QACtB,GAAG,WAAW,CAAC;AAAA,MACjB,OAAO;AACL,oBAAY;AACZ,mBAAW,KAAK,QAAQ;AACxB,mBAAW,SAAS;AAAA,MACtB;AAAA,IACF,CAAC,EAAE,MAAM,WAAW;AACpB,WAAO,WAAY;AACjB,UAAI,WAAW;AACb,mBAAW,MAAM;AAAA,MACnB;AAAA,IACF;AAAA,EACF,CAAC;AACH;",
  "names": []
}
